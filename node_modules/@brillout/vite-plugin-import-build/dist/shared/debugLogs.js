"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
exports.debugLogsBuildtime = exports.debugLogsRuntimePost = exports.debugLogsRuntimePre = void 0;
const utils_1 = require("./utils");
const DEBUG = false;
function debugLogsRuntimePre(importer) {
    if (!DEBUG)
        return;
    log('DEBUG_LOGS_RUNTIME [begin]');
    try {
        log('process.platform', JSON.stringify(process.platform));
    }
    catch (_a) {
        log('process.platform', 'undefined');
    }
    // https://stackoverflow.com/questions/4224606/how-to-check-whether-a-script-is-running-under-node-js/35813135#35813135
    try {
        log('process.release', JSON.stringify(process.release));
    }
    catch (_b) {
        log('process.release', 'undefined');
    }
    // https://github.com/cloudflare/workers-sdk/issues/1481 - Feature Request: Detect whether code is being run in Cloudflare Workers (or Node.js)
    try {
        log('navigator', JSON.stringify(navigator));
    }
    catch (_c) {
        log('navigator', 'undefined');
    }
    log('cwd', (0, utils_1.getCwd)());
    log('importer.status', importer.status);
    if (importer.status === 'SET') {
        log('importer.paths.autoImporterFilePathOriginal', importer.paths.autoImporterFilePathOriginal);
        log('importer.paths.autoImporterFileDirActual', importer.paths.autoImporterFileDirActual);
        log('importer.paths.importBuildFilePathRelative', importer.paths.importBuildFilePathRelative);
        log('importer.paths.importBuildFilePathOriginal', importer.paths.importBuildFilePathOriginal);
        try {
            log('importer.paths.importBuildFilePathResolved()', importer.paths.importBuildFilePathResolved());
        }
        catch (err) {
            log('importer.paths.importBuildFilePathResolved() error:', err);
            log('importer.paths.importBuildFilePathResolved()', 'ERRORED');
        }
    }
}
exports.debugLogsRuntimePre = debugLogsRuntimePre;
function debugLogsRuntimePost({ success, requireError }) {
    if (!DEBUG)
        return;
    log('requireError', requireError);
    log('success', success);
    log('DEBUG_LOGS_RUNTIME [end]');
}
exports.debugLogsRuntimePost = debugLogsRuntimePost;
function debugLogsBuildtime(paths) {
    if (!DEBUG)
        return;
    log('DEBUG_LOGS_BUILD_TIME [begin]');
    Object.entries(paths).forEach(([key, val]) => {
        log(key, val);
    });
    log('DEBUG_LOGS_BUILD_TIME [end]');
}
exports.debugLogsBuildtime = debugLogsBuildtime;
function log(...msgs) {
    console.log(`${utils_1.logLabel}[DEBUG]`, ...msgs);
}
