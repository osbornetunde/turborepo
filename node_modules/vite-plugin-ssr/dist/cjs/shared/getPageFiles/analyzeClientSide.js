"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
exports.analyzeClientSide = void 0;
const utils_1 = require("../page-configs/utils");
const analyzePageClientSide_1 = require("./analyzePageClientSide");
function analyzeClientSide(pageConfig, pageFilesAll, pageId) {
    if (pageConfig) {
        const isClientRouting = (0, utils_1.getConfigValue)(pageConfig, 'clientRouting', 'boolean') ?? false;
        const onRenderClientExists = !!(0, utils_1.getCodeFilePath)(pageConfig, 'onRenderClient');
        const PageExists = !!(0, utils_1.getCodeFilePath)(pageConfig, 'Page') && pageConfig.configElements.Page.configEnv !== 'server-only';
        const isClientSideRenderable = onRenderClientExists && PageExists;
        return { isClientSideRenderable, isClientRouting };
    }
    else {
        // TOOD: globally rename isHtmlOnly to !isClientSideRenderable
        const { isHtmlOnly, isClientRouting } = (0, analyzePageClientSide_1.analyzePageClientSide)(pageFilesAll, pageId);
        return { isClientSideRenderable: !isHtmlOnly, isClientRouting };
    }
}
exports.analyzeClientSide = analyzeClientSide;
