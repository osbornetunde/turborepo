export { loadPageFilesServerSide };
import { getPageFilesServerSide } from '../getAllPageIdFiles';
import { getExports } from '../getExports';
import { loadPageCode } from '../../page-configs/loadPageCode';
async function loadPageFilesServerSide(pageFilesAll, pageConfig, pageId, isDev) {
    const pageFilesServerSide = getPageFilesServerSide(pageFilesAll, pageId);
    const pageConfigLoaded = !pageConfig ? null : await loadPageCode(pageConfig, isDev);
    await Promise.all(pageFilesServerSide.map((p) => { var _a; return (_a = p.loadFile) === null || _a === void 0 ? void 0 : _a.call(p); }));
    const { config, configEntries, exports, exportsAll, pageExports } = getExports(pageFilesServerSide, pageConfigLoaded);
    return {
        config,
        configEntries,
        exports,
        exportsAll,
        pageExports,
        pageFilesLoaded: pageFilesServerSide,
        pageConfigLoaded
    };
}
